- trigger:
    - platform: time_pattern
      hours: /1
      #minutes: /10
  action:
    - service: weather.get_forecasts
      data:
        type: hourly
      target:
        entity_id:
          - weather.forecast_home
      response_variable: forecast_hourly
  sensor:
    - name: Weather Forecast Hourly
      unique_id: weather_forecast_hourly
      state: "{{ states('weather.forecast_home') }}"
      attributes:
        datetime0: "{{ forecast_hourly['weather.forecast_home'].forecast[0].datetime }}"
        shorttime0: "{{ as_timestamp(forecast_hourly['weather.forecast_home'].forecast[0].datetime) | timestamp_custom('%I') | int }} {{ as_timestamp(forecast_hourly['weather.forecast_home'].forecast[0].datetime) | timestamp_custom('%p') }}"
        condition0: "{{ forecast_hourly['weather.forecast_home'].forecast[0].condition }}"
        temperature0: "{{ forecast_hourly['weather.forecast_home'].forecast[0].temperature }}"
        wind_speed0: "{{ forecast_hourly['weather.forecast_home'].forecast[0].wind_speed }}"
        precipitation0: "{{ forecast_hourly['weather.forecast_home'].forecast[0].precipitation }}"
        datetime1: "{{ forecast_hourly['weather.forecast_home'].forecast[1].datetime }}"
        shorttime1: "{{ as_timestamp(forecast_hourly['weather.forecast_home'].forecast[1].datetime) | timestamp_custom('%I') | int }} {{ as_timestamp(forecast_hourly['weather.forecast_home'].forecast[1].datetime) | timestamp_custom('%p') }}"
        condition1: "{{ forecast_hourly['weather.forecast_home'].forecast[1].condition }}"
        temperature1: "{{ forecast_hourly['weather.forecast_home'].forecast[1].temperature }}"
        wind_speed1: "{{ forecast_hourly['weather.forecast_home'].forecast[1].wind_speed }}"
        precipitation1: "{{ forecast_hourly['weather.forecast_home'].forecast[1].precipitation }}"
        datetime2: "{{ forecast_hourly['weather.forecast_home'].forecast[2].datetime }}"
        shorttime2: "{{ as_timestamp(forecast_hourly['weather.forecast_home'].forecast[2].datetime) | timestamp_custom('%I') | int }} {{ as_timestamp(forecast_hourly['weather.forecast_home'].forecast[2].datetime) | timestamp_custom('%p') }}"
        condition2: "{{ forecast_hourly['weather.forecast_home'].forecast[2].condition }}"
        temperature2: "{{ forecast_hourly['weather.forecast_home'].forecast[2].temperature }}"
        wind_speed2: "{{ forecast_hourly['weather.forecast_home'].forecast[2].wind_speed }}"
        precipitation2: "{{ forecast_hourly['weather.forecast_home'].forecast[2].precipitation }}"
        datetime3: "{{ forecast_hourly['weather.forecast_home'].forecast[3].datetime }}"
        shorttime3: "{{ as_timestamp(forecast_hourly['weather.forecast_home'].forecast[3].datetime) | timestamp_custom('%I') | int }} {{ as_timestamp(forecast_hourly['weather.forecast_home'].forecast[3].datetime) | timestamp_custom('%p') }}"
        condition3: "{{ forecast_hourly['weather.forecast_home'].forecast[3].condition }}"
        temperature3: "{{ forecast_hourly['weather.forecast_home'].forecast[3].temperature }}"
        wind_speed3: "{{ forecast_hourly['weather.forecast_home'].forecast[3].wind_speed }}"
        precipitation3: "{{ forecast_hourly['weather.forecast_home'].forecast[3].precipitation }}"
